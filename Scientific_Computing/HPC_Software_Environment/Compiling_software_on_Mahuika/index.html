
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="NeSI Support Documentation">
      
      
      
        <link rel="canonical" href="https://github.com/nesi/support-docs-concept/Scientific_Computing/HPC_Software_Environment/Compiling_software_on_Mahuika/">
      
      
        <link rel="prev" href="../Build_an_Apptainer_container_on_a_Milan_compute_node/">
      
      
        <link rel="next" href="../Compiling_software_on_Maui/">
      
      
      <link rel="icon" href="../../../assets/icons/favicon.ico">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.4.10">
    
    
      
        <title>Compiling software on Mahuika - NeSI Support Center</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.fad675c6.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.356b1318.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/neoteroi-mkdocs.css">
    
      <link rel="stylesheet" href="../../../assets/stylesheets/footer.css">
    
      <link rel="stylesheet" href="../../../assets/stylesheets/custom_admonations.css">
    
      <link rel="stylesheet" href="../../../assets/stylesheets/theme.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="indigo">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#where-to-build" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
<style>
#banner{
    font-size: larger;
    text-align: center;
    background:  var(--md-warning-bg-color);
}
#banner a:link {
    color: blue;
}
#banner a:visited {
    color: purple;
}
#banner a:focus,
#banner a:hover {
    border-bottom: 1px solid;
}
#banner p{
    color: black;
}
</style>

<div id="banner">
    <p>This site is in Beta. All content is a duplication of  
    <a href="https://support.nesi.org.nz/hc/en-gb">offical NeSI support documentation.</a>
    </p>
</div>

      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="NeSI Support Center" class="md-header__button md-logo" aria-label="NeSI Support Center" data-md-component="logo">
      
  <img src="../../../assets/icons/logo.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            NeSI Support Center
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Compiling software on Mahuika
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9v1Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="custom" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5Z"/></svg>
      </label>
    
  
</form>
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/nesi/support-docs-concept" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    


    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="NeSI Support Center" class="md-nav__button md-logo" aria-label="NeSI Support Center" data-md-component="logo">
      
  <img src="../../../assets/icons/logo.svg" alt="logo">

    </a>
    NeSI Support Center
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/nesi/support-docs-concept" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    
  
  
    <a href="../../../Getting_Started/Accessing_the_HPCs/Choosing_and_Configuring_Software_for_Connecting_to_the_Clusters/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Getting Started
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

  

      
    </li>
  

    
      
      
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    
  
  
    <a href="../../../General/Announcements/Accessing_NeSI_Support_during_the_holiday_break/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    General
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

  

      
    </li>
  

    
      
      
  
  
    
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Scientific Computing
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Scientific Computing
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1" checked>
        
          
          <label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    HPC Software Environment
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3_1">
            <span class="md-nav__icon md-icon"></span>
            HPC Software Environment
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../Build_an_Apptainer_container_on_a_Milan_compute_node/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Build an Apptainer container on a Milan compute node
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Compiling software on Mahuika
  </span>
  

      </a>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../Compiling_software_on_Maui/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Compiling software on Māui
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../Configuring_Dask_MPI_jobs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuring Dask-MPI jobs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../Finding_Software/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Finding Software
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../Installing_Third_Party_applications/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installing (Third Party) applications
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../NICE_DCV_Setup/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    NICE DCV Setup
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../NVIDIA_GPU_Containers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    NVIDIA GPU Containers
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../Offloading_to_GPU_with_OpenACC/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Offloading to GPU with OpenACC
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../Offloading_to_GPU_with_OpenMP/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Offloading to GPU with OpenMP 
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../OpenMP_settings/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OpenMP settings
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../Per_job_temporary_directories/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Per job temporary directories
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../Programming_environment_differences_between_Maui_and_Mahuika/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Programming environment differences between Maui and Mahuika
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../Software_Version_Management/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Software Version Management
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../Thread_Placement_and_Thread_Affinity/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Thread Placement and Thread Affinity
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../Visualisation_software/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Visualisation software
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../Interactive_computing_using_Jupyter/Jupyter_kernels_Manual_management/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Interactive computing using Jupyter
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../Manuals_and_User_Guides/Manuals/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Manuals and User Guides
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../Profiling_and_Debugging/Debugging/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Profiling and Debugging
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../Release_Notes_jupyter-nesi-org-nz/jupyter-nesi-org-nz_release_notes_02-02-2023/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Release Notes jupyter nesi org nz
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../Running_Jobs_on_Maui_and_Mahuika/Checking_your_projects_usage_using_nn_corehour_usage/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Running Jobs on Maui and Mahuika
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../Supported_Applications/ABAQUS/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Supported Applications
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../Terminal_Setup/Git_Bash_Windows/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Terminal Setup
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../The_NeSI_High_Performance_Computers/Available_GPUs_on_NeSI/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    The NeSI High Performance Computers
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../Training/Introduction_to_computing_on_the_NeSI_HPC/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Training
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    
  
  
    <a href="../../../Storage/Data_Recovery/File_Recovery/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Storage
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

  

      
    </li>
  

    
      
      
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    
  
  
    <a href="../../../NeSI_Service_Subscriptions/Contracts_and_billing_processes/Billing_process/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    NeSI Service Subscriptions
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

  

      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                

                  

  
    <a href="https://github.com/nesi/support-docs-concept/edit/main/docs/Scientific_Computing/HPC_Software_Environment/Compiling_software_on_Mahuika.md" title="Edit this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4v-2m10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1 2.1 2.1Z"/></svg>
    </a>
  
  


<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This page has been automatically migrated and may contain formatting errors.</p>
</div>
<h1 id="where-to-build">Where to build<a class="headerlink" href="#where-to-build" title="Permanent link">&para;</a></h1>
<p>You may compile (build) software on the Mahuika login nodes,
<code>login.mahuika.nesi.org.nz</code>. Please be aware that these login nodes are
limited and shared resources. Please limit the amount of processes on
these nodes. For example, use <code>make -j 5</code> instead of <code>make -j</code>. If you
require many CPU cores or long run times for your build process, please
request these resources through a batch job submitted to Slurm, where
you can also ask for a larger amount of compute resources to build your
code.</p>
<h1 id="compilers-and-toolchains">Compilers and Toolchains<a class="headerlink" href="#compilers-and-toolchains" title="Permanent link">&para;</a></h1>
<p>Compilers produced by three different vendors are provided on Mahuika:
Cray, GNU and Intel.</p>
<p>The GNU and Intel compilers can be accessed by loading one of the
toolchains:</p>
<ul>
<li><code>module load gimkl/2020a</code> - the default toolchain, providing GNU
    compilers (version 9.2.0), Intel MPI and Intel MKL</li>
<li><code>module load intel/2020a</code> - Intel compilers (version 2020.0.166),
    Intel MPI and Intel MKL</li>
</ul>
<p>A large number of dependencies are built against these toolchains, so
they are usually a good place to start when building your own software.
However, if for any reason you require a different version of one of
these compilers, you can load a compiler module directly, instead of
loading a toolchain. For example, the installed versions of the GNU
compilers can be listed with the following command:</p>
<p><code>module spider GCC</code></p>
<p>and version 7.4.0 loaded with the following command:</p>
<p><code>module load GCC/7.4.0</code></p>
<p>The Cray compilers behave differently to the GNU and Intel compilers,
since they are installed as a Cray Programming Environment, and have
some special features (see section Cray Programming Environment). The
Cray compilers are loaded with:</p>
<p><code>module load PrgEnv-cray</code></p>
<h1 id="third-party-applications">Third party applications<a class="headerlink" href="#third-party-applications" title="Permanent link">&para;</a></h1>
<p>Installation instructions vary from application to application, and we
suggest that you carefully read the instructions provided by the
developers of the software you plan to use. Nevertheless, the following
should give you an impression which steps you usually need to consider:</p>
<ol>
<li>Change into your desired source code directory. We suggest you use
    <code>/nesi/project/&lt;projectID&gt;</code>, or more typically one of its
    subdirectories. You may instead use <code>/nesi/nobackup/&lt;projectID&gt;</code> (or
    one of its subdirectories) if you don't mind the software not being
    backed up and prone to automatic deletion in certain circumstances.</li>
<li>Download the source code. This could be done via a repository
    checkout (<code>git clone &lt;source-url&gt;</code>) or via downloading a tarball
    (<code>wget &lt;source-url&gt;</code>).</li>
<li>Ensure the tarball is not a tarbomb,
    using <code>tar tf &lt;source.tar&gt; | sort | less</code> (<code>tar tzf ...</code> if the
    source code is a gzipped tarball, <code>tar tjf ...</code> if a bzip2
    compressed tarball). If you find that the tarball is in fact a
    tarbomb, you will need to handle it using special techniques.</li>
<li>Unpack the tarball using <code>tar xf &lt;source.tar&gt;</code>. Change into the
    source directory.</li>
<li>Load the preferred toolchain (or compiler module) and modules for
    any additional required libraries (<code>module load gimkl FFTW</code>)</li>
<li>Run the configure script with appropriate options,
    e.g. <code>./configure --prefix=&lt;desired install directory&gt; --use-fftw=$EBROOTFFTW</code>(options
    can usually be listed using <code>./configure --help</code>)</li>
<li>In some applications you need to adjust the <code>Makefile</code> (generated by
    <code>configure</code>) to reflect your preferred compiler, and library options
    (see below)</li>
<li>Compile the code (<code>make``)</code></li>
<li>install the binaries and libraries into the specified directory
    (<code>make install</code>)</li>
</ol>
<h1 id="compilers">Compilers<a class="headerlink" href="#compilers" title="Permanent link">&para;</a></h1>
<p>Compilers are provided for Fortran, C, and C++. For MPI-parallelised
code, different compilers typically need to be used. The different
<strong>compilers</strong> are listed:</p>
<hr />
<p>Language    Cray                  Intel                 GNU</p>
<hr />
<p>Fortran     ftn                   ifort                 gfortran</p>
<p>Fortran +   ftn                   mpiifort              mpif90
  MPI                                                     </p>
<p>C           cc                    icc                   gcc</p>
<p>C + MPI     cc                    mpiicc                mpicc</p>
<p>C++         CC                    icpc                  g++</p>
<p>C++ + MPI   CC                    mpiicpc               mpicxx</p>
<hr />
<p><strong>Note</strong>, Cray uses compiler wrappers which are described <a href="#cray-programming-environment">later in more
detail</a>.</p>
<p>In general you then compile your code using:</p>
<p><code>&lt;compiler&gt; &lt;CompilerOptions&gt; &lt;source-file&gt;</code></p>
<p>e.g.</p>
<p><code>ftn -O3 hello.f90</code></p>
<h1 id="compiler-options">Compiler options<a class="headerlink" href="#compiler-options" title="Permanent link">&para;</a></h1>
<p>Compilers are controlled using different options to control
optimizations, output, source and library handling. There options vary
between the different compiler vendors. That means you will need to
change them if you decide to switch compilers. The following table
provides a list of commonly used compiler <strong>options</strong> for the different
compilers:</p>
<hr />
<p>Group           Cray                             Intel                GNU                                Notes</p>
<hr />
<p>Debugging       <code>-g</code> or <code>-G{0,1,2,fast}</code>         <code>-g</code> or              <code>-g or -g{0,1,2,3}</code>                Set level of
                                                   <code>-debug [keyword]</code>                                      debugging
                                                                                                           information,
                                                                                                           some levels may
                                                                                                           disable certain
                                                                                                           compiler
                                                                                                           optimisations</p>
<p>Light compiler  <code>-O2</code>                            <code>-O2</code>                <code>-O2</code>                               
  optimisation                                                                                             </p>
<p>Aggressive      <code>-O3 -hfp3</code>                      <code>-O3 -ipo</code>           <code>-O3 -ffast-math -funroll-loops</code>   This may affect
  compiler                                                                                                 numerical
  optimisation                                                                                             accuracy</p>
<p>Architecture    Load this module first:          <code>-xHost</code>             <code>-march=native -mtune=native</code>      Build and
  specific        <code>module load craype-broadwell</code>                                                           compute nodes
  optimisation                                                                                             have the same
                                                                                                           architecture
                                                                                                           (Broadwell)</p>
<p>Vectorisation   <code>-hlist=m</code>                       <code>-qopt-report</code>       <code>-fopt-info-vec</code> or                 
  reports                                                               <code>-fopt-info-missed</code>                </p>
<p>OpenMP          <code>-homp</code> (default)                <code>-qopenmp</code>           <code>-fopenmp</code>                         </p>
<hr />
<p>Additional compiler options are documented in the compiler man pages,
e.g. <code>man mpicc</code>, which are available <em>after</em> loading the related
compiler module. Additional documentation can be also found at the
vendor web pages:</p>
<ul>
<li><a href="https://pubs.cray.com/content/S-3901/8.7/cray-fortran-reference-manual/fortran-compiler-introduction">Cray Fortran
    v8.7</a>,
    <a href="https://pubs.cray.com/content/S-2179/8.7/cray-c-and-c++-reference-manual/invoke-the-c-and-c++-compilers">Cray C and C++
    v8.7</a></li>
<li><a href="https://software.intel.com/en-us/node/685016">Intel Parallel Studio XE Cluster
    Edition</a> for Linux is
    installed on the Mahuika HPC Cluster, Mahuika Ancillary Nodes</li>
<li><a href="https://software.intel.com/en-us/documentation/view-all?search_api_views_fulltext=&amp;current_page=0&amp;value=78151,83039;20813,80605,79893,20812,20902;20816;20802;20804">Intel Developer
    Guides</a></li>
<li><a href="https://gcc.gnu.org/onlinedocs/">GCC Manuals</a></li>
</ul>
<p><strong>Note</strong>: Cray uses compiler wrappers. To list the compiler options,
please consult the man pages for the actual compiler, not the wrapper.</p>
<p>For example, the following commands would be used to compile with the
gfortran compiler, activate compiler warnings (<code>-Wall</code>), and requiring
aggressive compiler optimisation (<code>-O3</code>):</p>
<p><code>module load gimkl/2018b</code></p>
<p><code>mpif90 -Wall -O3 -o simpleMpi simpleMpi.f90</code></p>
<h1 id="linking">Linking<a class="headerlink" href="#linking" title="Permanent link">&para;</a></h1>
<p>Your application may depend on one or more external software packages,
normally libraries, and if so it will need to link against them when you
compile the program. In general, to link against an external package,
one must specify:</p>
<ul>
<li>The location of the header files, using the option
    <code>-I/path/to/headers</code></li>
<li>The location of the compiled library or libraries, using
    <code>-L/path/to/lib/</code></li>
<li>The name of each library, typically without prefixes and suffixes.
    For example, if the full library file name is <code>libfoo.so.1.2.3</code>
    (with aliases <code>libfoo.so.1</code> and <code>libfoo.so</code>), the expected entry on
    the link line is <code>-lfoo</code>.</li>
</ul>
<p>Thus the linker expects to find the include headers in the
<em>/path/to/headers</em> and the library at <em>/path/to/lib/lib.so</em> (we assume
dynamic linking).</p>
<p>Note that you may need to list several libraries to link successfully,
e.g., <code>-lA -lB</code> for linking against libraries "A" and "B". The order in
which you list libraries matters, as the linker will go through the list
in order of appearance. If library "A" depends on library "B",
specifying <code>-lA -lB</code> will work. If library "B" depends on "A", use
<code>-lB -lA</code>. If they depend on each other, use <code>-lA -lB -lA</code> (although
such cases are quite rare).</p>
<h2 id="external-libraries">External Libraries<a class="headerlink" href="#external-libraries" title="Permanent link">&para;</a></h2>
<p>There are already many libraries provided on the Mahuika platform. Most
of them are provided in modules. You can search them using</p>
<p><code>module spider</code></p>
<p>and look in the module description using:</p>
<p><code>module help &lt;module-name&gt;</code></p>
<p>Sometimes modules provide multiple libraries, e.g. <em>cray-libsci</em>.</p>
<p>Most libraries are provided using the EasyBuild software management
system, that NeSI/NIWA use to provide modules. Easybuild automatically
defines environment variables <code>$EBROOT&lt;library name in upper case&gt;</code> when
a module is loaded, which help pointing the compiler and linker to
include files and libraries as in the example above. Thus, you can keep
your Makefile independent of library versions, by defining e.g.
<code>-L$EBROOT&lt;library name in upper case&gt;/lib</code>. Therewith you can use
another version by only swapping modules. If you are unsure which
<code>$EBROOT&lt;...&gt;</code> variables are available, use</p>
<p><code>module show &lt;module-name&gt;</code></p>
<p>to find out.</p>
<p>Note that specifying search paths with <code>-I</code> and <code>-L</code> is not strictly
necessary in case of the GNU and Intel compilers, which will use the
contents of <code>CPATH</code>, <code>LIRARY_PATH</code>, and <code>LD_LIBRARY_PATH</code> provided by
the NeSI/NIWA module. This will not work with the Cray compiler.</p>
<p><strong>Important note:</strong> Make sure that you load the correct variant of a
library, depending on your choice of compiler. Switching compiler
environment will <em>not</em> switch NeSI/NIWA modules automatically.
Furthermore, loading a NeSI/NIWA module may switch programming
environment if it was built with a different compiler. In general, the
used library should be build with the same compiler.</p>
<p><strong>Note:</strong> the mentioned MPI compilers are practically compiler wrappers
adding the location to the MPI library. This can be observed calling
e.g. <code>mpif90 -showme</code></p>
<h2 id="common-linker-problems">Common Linker Problems<a class="headerlink" href="#common-linker-problems" title="Permanent link">&para;</a></h2>
<p>Linking can easily go wrong. Most often, you will see linker errors
about "missing symbols" when the linker could not find a function used
in your program or in one of the libraries that you linked against. To
resolve this problem, have a closer look at the function names that the
linker reported:</p>
<ul>
<li>Are you missing some object code files (these are compiled source
    files and have suffix <code>.o</code>) that should appear on the linker line?
    This can happen if the build system was not configured correctly or
    has a bug. Try running the linking step manually with all source
    files and debug the build system (which can be a lengthy and
    cumbersome process, unfortunately).</li>
<li>Do the missing functions have names that contain "mp" or "omp"? This
    could mean that some of your source files or external libraries were
    built with OpenMP support, which requires you to set an OpenMP flag
    (<code>-fopenmp</code> for GNU compilers, <code>-qopenmp</code> for Intel) in your linker
    command. For the Cray compilers, OpenMP is enabled by default and
    can be controlled using <code>-h[no]omp</code>.</li>
<li>Do you see a very long list of complex-looking function names, and
    does your source code or external library dependency include C++
    code? You may need to explicitly link against the C++ standard
    library (<code>-lstdc++</code> for GNU and Cray compilers, <code>-cxxlib</code> for Intel
    compilers); this is a particularly common problem for statically
    linked code.</li>
<li>Do the function names end with an underscore ("_")? You might be
    missing some Fortran code, either from your own sources or from a
    library that was written in Fortran, or parts of your Fortran code
    were built with flags such as <code>-assume nounderscore</code> (Intel) or
    <code>-fno-underscoring</code> (GNU), while others were using different flags
    (note that the Cray compiler always uses underscores).</li>
<li>Do the function names end with double underscores ("__")? Fortran
    compilers offer an option to add double underscores to Fortran
    subroutine names for compatibility reasons
    (<code>-h [no]second_underscore</code>, <code>-assume [no]2underscores</code>,
    <code>-f[no-]second-underscore</code>) which you may have to add or remove.</li>
<li>Compiler not necessarily enable preprocessing, which could result in
    <code>#ifndef VAR; Warning: Illegal preprocessor directive</code>. For example,
    using preprocessor directives in <code>.f</code> files with gfortran requires
    the <code>-cpp</code> option.</li>
</ul>
<p>Note that the linker requires that function names match exactly, so any
variation in function name in your code will lead to a "missing symbols"
error (with the exception of character case in Fortran source code).</p>
<h1 id="cray-programming-environment">Cray Programming Environment<a class="headerlink" href="#cray-programming-environment" title="Permanent link">&para;</a></h1>
<p>The Cray Programming Environment includes the Cray compiler, various
libraries and tools. These work nicely together and provide certain
user-friendly features by using compiler wrappers. This works very
similar as the Cray XC environment, provided on Māui, and is described
in detail on the page <a href="https://support.nesi.org.nz/hc/en-gb/articles/360000336076">Building Code on
Māui</a>.</p>
<p><strong>Note:</strong> on Māui the three compilers (Cray, Gnu and Intel) are provided
in this special environment, which provides support for both dynamic and
static linking. In contrast to that, on Mahuika only the Cray compiler
is provided in this environment. Furthermore, it only provides support
for dynamic linking.</p>

  <hr>
<div class="md-source-file">
  <small>
    
      Last update:
      <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">November 16, 2023</span>
      
        <br>
        Created:
        <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">July 21, 2021</span>
      
    
  </small>
</div>





                


<div class="md-source-date">
    <small>
        Authors: <span class='git-page-authors git-authors'><a href='mailto:35017184+callumwalley@users.noreply.github.com'>Cal</a>, <a href='mailto:callum.walley@auckland.ac.nz'>Callum Walley</a>, <a href='mailto:callumnmw@gmail.com'>CallumWalley</a>, <a href='mailto:callum.walley@nesi.org.nz'>cal</a></span>
    </small>
</div>


              </article>
            </div>
          
          
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
    <div id="new-footer">
        <div id="partners">
          <div id="logos">
            <a href="https://nesi.org.nz" class="nesi-footer-logo" target="_blank"><img alt="" src="https://www.nesi.org.nz/sites/default/files/LogoNeSI-footer.png"></a>
            <a href="http://www.mbie.govt.nz/" target="_blank"><img alt="" src="https://www.nesi.org.nz/sites/default/files/media/LogoMBIE.png"></a>
            <a href="https://www.auckland.ac.nz/" target="_blank"><img alt="" src="https://www.nesi.org.nz/sites/default/files/media/LogoUoA.png"></a>
            <a href="https://www.niwa.co.nz/" target="_blank"><img alt="" src="https://www.nesi.org.nz/sites/default/files/media/LogoNIWA.png"></a>
            <a href="https://www.otago.ac.nz/" target="_blank"><img alt="" src="https://www.nesi.org.nz/sites/default/files/media/LogoUoO.png"></a>
            <a href="http://www.landcareresearch.co.nz/" target="_blank"><img alt="" src="https://www.nesi.org.nz/sites/default/files/LogoManaakiWhenuaLandcareResearch.png"></a>
          </div>
        </div>
        <div id="inner">
          <span id="links"><a href="https://www.nesi.org.nz/copyright" target="_blank">Copyright © <span id="year">2023</span> · New Zealand eScience Infrastructure</a> | <a href="https://www.nesi.org.nz//disclaimer" target="_blank">Disclaimer</a> | <a href="https://www.nesi.org.nz//privacy" target="_blank">Privacy</a>
          </span>
        </div>
    </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.indexes", "navigation.top", "navigation.prune", "content.code.copy", "content.action.edit"], "search": "../../../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.6c14ae12.min.js"></script>
      
        <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
      
    
  </body>
</html>