
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="NeSI Support Documentation">
      
      
      
        <link rel="canonical" href="https://github.com/nesi/support-docs-concept/Scientific_Computing/Supported_Applications/Trinity/">
      
      
        <link rel="prev" href="../TensorFlow_on_GPUs/">
      
      
        <link rel="next" href="../TurboVNC/">
      
      
      <link rel="icon" href="../../../assets/icons/favicon.ico">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.9">
    
    
      
        <title>Trinity - NeSI Support Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.f2e4d321.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/neoteroi-mkdocs.css">
    
      <link rel="stylesheet" href="../../../assets/stylesheets/footer.css">
    
      <link rel="stylesheet" href="../../../assets/stylesheets/custom_admonations.css">
    
      <link rel="stylesheet" href="../../../assets/stylesheets/theme.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-TVQR4R1F40"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-TVQR4R1F40",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-TVQR4R1F40",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#available-modules" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
<style>
#banner{
    font-size: larger;
    text-align: center;
    background:  var(--md-warning-bg-color);
}
#banner a:link {
    color: blue;
}
#banner a:visited {
    color: purple;
}
#banner a:focus,
#banner a:hover {
    border-bottom: 1px solid;
}
#banner p{
    color: black;
}
</style>

<div id="banner">
    <p>This site is in Beta. All content is a duplication of  
    <a href="https://support.nesi.org.nz/hc/en-gb">offical NeSI support documentation.</a>
    </p>
</div>

      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="NeSI Support Documentation" class="md-header__button md-logo" aria-label="NeSI Support Documentation" data-md-component="logo">
      
  <img src="../../../assets/icons/logo.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            NeSI Support Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Trinity
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9v1Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="custom" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/nesi/support-docs-concept" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    


    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="NeSI Support Documentation" class="md-nav__button md-logo" aria-label="NeSI Support Documentation" data-md-component="logo">
      
  <img src="../../../assets/icons/logo.svg" alt="logo">

    </a>
    NeSI Support Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/nesi/support-docs-concept" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    
  
  
    <a href="../../../Getting_Started/Accounts-Projects_and_Allocations/Creating_a_NeSI_Account_Profile/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Getting Started
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    
  
  
    <a href="../../../General/Announcements/Accessing_NeSI_Support_during_the_holiday_break/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    General
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

  

      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Scientific Computing
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Scientific Computing
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Supported Applications
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3_1">
            <span class="md-nav__icon md-icon"></span>
            Supported Applications
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ABAQUS/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ABAQUS
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ANSYS/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ANSYS
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../AlphaFold/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AlphaFold
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../BLAST/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    BLAST
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../BRAKER/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    BRAKER
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../CESM/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CESM
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../COMSOL/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    COMSOL
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Clair3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Clair3
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Cylc/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cylc
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Delft3D/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Delft3D
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Dorado/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Dorado
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../FDS/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    FDS
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../GATK/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    GATK
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../GROMACS/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    GROMACS
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Gaussian/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Gaussian
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Java/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Java
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Julia/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Julia
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../JupyterLab/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    JupyterLab
  </span>
  
    
  
  
    <span class="md-status md-status--deprecated"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Keras/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Keras
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Lambda%20Stack/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Lambda Stack
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../MAKER/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    MAKER
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../MATLAB/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    MATLAB
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Miniconda3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Miniconda3
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ORCA/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ORCA
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../OpenFOAM/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OpenFOAM
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../OpenSees/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OpenSees
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ParaView/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ParaView
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Python/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Python
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../R/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    R
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../RAxML/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    RAxML
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Relion/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Relion
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Singularity/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Singularity
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Software%20Installation%20Request/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Software Installation Request
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Supernova/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Supernova
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Synda/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Synda
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../TensorFlow_on_CPUs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    TensorFlow on CPUs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../TensorFlow_on_GPUs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    TensorFlow on GPUs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Trinity
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Trinity
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#available-modules" class="md-nav__link">
    <span class="md-ellipsis">
      Available Modules
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#running-trinity-on-nesi" class="md-nav__link">
    <span class="md-ellipsis">
      Running Trinity on NeSI
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Running Trinity on NeSI">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#file-system-considerations" class="md-nav__link">
    <span class="md-ellipsis">
      File system considerations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#quality-control" class="md-nav__link">
    <span class="md-ellipsis">
      Quality Control
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#running-trinity-phase-1" class="md-nav__link">
    <span class="md-ellipsis">
      Running Trinity Phase 1
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#running-trinity-phase-2" class="md-nav__link">
    <span class="md-ellipsis">
      Running Trinity Phase 2
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#benchmarks" class="md-nav__link">
    <span class="md-ellipsis">
      Benchmarks
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Benchmarks">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#test-sample" class="md-nav__link">
    <span class="md-ellipsis">
      Test sample
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#marine-sediment-sample-1" class="md-nav__link">
    <span class="md-ellipsis">
      Marine sediment sample 1
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#marine-sediment-sample-2" class="md-nav__link">
    <span class="md-ellipsis">
      Marine sediment sample 2
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../TurboVNC/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    TurboVNC
  </span>
  
    
  
  
    <span class="md-status md-status--deprecated"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../VASP/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    VASP
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../VTune/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    VTune
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../VirSorter/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    VirSorter
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../WRF/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    WRF
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ipyrad/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ipyrad
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ont-guppy-gpu/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ont-guppy-gpu
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../snpEff/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    snpEff
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../Training/Introduction_to_computing_on_the_NeSI_HPC/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Training
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../Interactive_computing_using_Jupyter/Jupyter_on_NeSI/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Interactive computing using Jupyter
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../The_NeSI_High_Performance_Computers/Overview/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    The NeSI High Performance Computers
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../Running_Jobs_on_Maui_and_Mahuika/Checking_your_projects_usage_using_nn_corehour_usage/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Running Jobs on Māui and Mahuika
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../Profiling_and_Debugging/Debugging/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Profiling and Debugging
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../HPC_Software_Environment/Build_an_Apptainer_container_on_a_Milan_compute_node/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    HPC Software Environment
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../Terminal_Setup/Standard_Terminal_Setup/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Terminal Setup
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../Manuals_and_User_Guides/Manuals/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Manuals and User Guides
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    
  
  
    <a href="../../../Storage/File_Systems_and_Quotas/NeSI_File_Systems_and_Quotas/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Storage
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

  

      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#available-modules" class="md-nav__link">
    <span class="md-ellipsis">
      Available Modules
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#running-trinity-on-nesi" class="md-nav__link">
    <span class="md-ellipsis">
      Running Trinity on NeSI
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Running Trinity on NeSI">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#file-system-considerations" class="md-nav__link">
    <span class="md-ellipsis">
      File system considerations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#quality-control" class="md-nav__link">
    <span class="md-ellipsis">
      Quality Control
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#running-trinity-phase-1" class="md-nav__link">
    <span class="md-ellipsis">
      Running Trinity Phase 1
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#running-trinity-phase-2" class="md-nav__link">
    <span class="md-ellipsis">
      Running Trinity Phase 2
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#benchmarks" class="md-nav__link">
    <span class="md-ellipsis">
      Benchmarks
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Benchmarks">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#test-sample" class="md-nav__link">
    <span class="md-ellipsis">
      Test sample
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#marine-sediment-sample-1" class="md-nav__link">
    <span class="md-ellipsis">
      Marine sediment sample 1
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#marine-sediment-sample-2" class="md-nav__link">
    <span class="md-ellipsis">
      Marine sediment sample 2
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                

                  

  
    <a href="https://github.com/nesi/support-docs-concept/edit/main/docs/Scientific_Computing/Supported_Applications/Trinity.md" title="Edit this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4v-2m10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1 2.1 2.1Z"/></svg>
    </a>
  
  


  <h1>Trinity</h1>

<p>Trinity represents a novel method for the efficient and robust de novo reconstruction</p>
<p><a href="http://trinityrnaseq.github.io">Trinity Homepage</a></p>
<h2 id="available-modules">Available Modules<a class="headerlink" href="#available-modules" title="Permanent link">&para;</a></h2>
<div class="tabbed-set tabbed-alternate" data-tabs="0:1">
    <input checked="checked" id="__tabbed__trinity_1" name="__tabbed__trinity_0" type="radio">

    <div class="tabbed-labels">
        <label for="__tabbed__trinity_1">Mahuika</label>

    </div>
    <div class="tabbed-content">
    <div class="tabbed-block">
            <p><nav class="md-tags md-tags-ver-trinity-mahuika">
                    <a id="mod_trinity_mahuika_2.8.4-gimkl-2018b" onclick="changeVersion('trinity', 'mahuika','2.8.4-gimkl-2018b')" class="md-tag-ver md-tag">2.8.4-gimkl-2018b</a>
                    <a id="mod_trinity_mahuika_2.8.5-gimkl-2018b" onclick="changeVersion('trinity', 'mahuika','2.8.5-gimkl-2018b')" class="md-tag-ver md-tag">2.8.5-gimkl-2018b</a>
                    <a id="mod_trinity_mahuika_2.8.6-gimkl-2020a" onclick="changeVersion('trinity', 'mahuika','2.8.6-gimkl-2020a')" class="md-tag-ver md-tag">2.8.6-gimkl-2020a</a>
                    <a id="mod_trinity_mahuika_2.11.0-gimkl-2020a" onclick="changeVersion('trinity', 'mahuika','2.11.0-gimkl-2020a')" class="md-tag-ver md-tag">2.11.0-gimkl-2020a</a>
                    <a id="mod_trinity_mahuika_2.13.2-gimkl-2020a" onclick="changeVersion('trinity', 'mahuika','2.13.2-gimkl-2020a')" class="md-tag-ver md-tag">2.13.2-gimkl-2020a</a>
                    <a id="mod_trinity_mahuika_2.14.0-gimkl-2022a" onclick="changeVersion('trinity', 'mahuika','2.14.0-gimkl-2022a')" class="md-tag-ver-shown md-tag-ver md-tag" title="Default Version" class="md-tag-ver md-tag">2.14.0-gimkl-2022a</a>

            </nav></p>
            <pre><code>module load Trinity/<span id="mod_trinity_mahuika">2.14.0-gimkl-2022a</span></code></pre>
        </div>
    </div>
    <div class="tabbed-control tabbed-control--prev" hidden="">
        <button class="tabbed-button" tabindex="-1" aria-hidden="true"></button>
    </div>
    <div class="tabbed-control tabbed-control--next" hidden="">
        <button class="tabbed-button" tabindex="-1" aria-hidden="true"></button>
    </div>
</div>
<!-- _See [environment modules]() for more info on how NeSI uses modules._ -->

<p>Trinity, developed at the <a href="http://www.broadinstitute.org/">Broad
Institute</a> and the <a href="http://www.cs.huji.ac.il/">Hebrew University of
Jerusalem</a>, performs <em>de&nbsp;novo</em> reconstruction
of transcriptomes from RNA-seq data. It combines three independent
software modules: Inchworm, Chrysalis, and Butterfly, applied
sequentially to process large volumes of RNA-seq reads. Trinity
partitions the sequence data into many individual de Bruijn graphs, each
representing the transcriptional complexity at a given gene or locus,
and then processes each graph independently to extract full-length
splicing isoforms and to tease apart transcripts derived from paralogous
genes.</p>
<p>General documentation for running Trinity can be found on their GitHub
page
<a href="https://github.com/trinityrnaseq/trinityrnaseq/wiki/Running-Trinity">here</a>.</p>
<h2 id="running-trinity-on-nesi">Running Trinity on NeSI<a class="headerlink" href="#running-trinity-on-nesi" title="Permanent link">&para;</a></h2>
<p>The recommended approach for running Trinity on NeSI is to split the run
into two separate job submissions. The first submission will run Trinity
Phase 1 (read clustering) and the second submission will run Trinity
Phase 2 (assembling read clusters). We have observed faster run times
and reduced core hour usage when applying this approach to benchmark
data, compared to running both phases in one multithreaded job (see the
<a href="#benchmarks">Benchmarks</a> section below).</p>
<h3 id="file-system-considerations">File system considerations<a class="headerlink" href="#file-system-considerations" title="Permanent link">&para;</a></h3>
<p>You should run Trinity within your <a href="../../../Storage/File_Systems_and_Quotas/NeSI_File_Systems_and_Quotas/">nobackup project
directory</a>,
which has no limit on disk space usage but does have a file count quota.
Trinity creates a large number of files, particularly in the
"read_partitions" directory, thus it is important that you <a href="mailto:support@nesi.org.nz">Contact our Support Team</a> before running Trinity on NeSI, as we
may need to increase your default file count quota.</p>
<h3 id="quality-control">Quality Control<a class="headerlink" href="#quality-control" title="Permanent link">&para;</a></h3>
<p>We must stress the importance of read QC prior to running the assembly
otherwise it is likely to fail or take a very long time to complete.</p>
<h3 id="running-trinity-phase-1">Running Trinity Phase 1<a class="headerlink" href="#running-trinity-phase-1" title="Permanent link">&para;</a></h3>
<p>Trinity Phase 1 can be broken into three main components:</p>
<ul>
<li>Initial in silico normalisation step and kmer counting</li>
<li>Inchworm</li>
<li>Chrysalis</li>
</ul>
<p>So far we have found no reason to run each component individually since
they have been observed to require similar resources. This phase
typically has high memory requirements and supports multithreading in
places.</p>
<p>The following Slurm script is a template for running Trinity Phase 1</p>
<p><strong>Note</strong>  :</p>
<ul>
<li><code>--cpus-per-task</code> and <code>--mem</code> defined in the following example are
  just place holders. </li>
<li>Use a subset of your sample, run a test first to find the
  suitable/required amount of CPUs and memory for your dataset</li>
</ul>
<div class="highlight"><pre><span></span><code>#!/bin/bash -e
#SBATCH --job-name=trinity-phase1
#SBATCH --account=nesi12345   # your NeSI project code
#SBATCH --time=30:00:00       # maximum run time
#SBATCH --ntasks=1            # always 1
#SBATCH --cpus-per-task=16    # number of threads to use for Trinity
#SBATCH --mem=220G            # maximum memory available to Trinity
#SBATCH --hint=nomultithread  # disable hyper-threading

# load a Trinity module
module load Trinity/2.14.0-gimkl-2022a

# run trinity, stop before phase 2
srun Trinity --no_distributed_trinity_exec \
  --CPU ${SLURM_CPUS_PER_TASK} --max_memory 200G \
  [your_other_trinity_options]
</code></pre></div>
<p>The extra Trinity arguments are:</p>
<ul>
<li><code>--no_distributed_trinity_exec</code> tells Trinity to stop before running
  Phase 2</li>
<li><code>--CPU ${SLURM_CPUS_PER_TASK}</code> tells Trinity to use the number of
  CPUs specified by the sbatch option <code>--cpus-per-task</code> (i.e. you only
  need to update it in one place if you change it)</li>
<li><code>--max_memory</code> should be the same (or maybe slightly lower, so you
  have a small buffer) than the value specified with the sbatch option
  <code>--mem</code></li>
<li><code>[your_other_trinity_options]</code> should be replaced with the other
  trinity options you would usually use, e.g. <code>--seqType fq</code>, etc.</li>
</ul>
<h3 id="running-trinity-phase-2">Running Trinity Phase 2<a class="headerlink" href="#running-trinity-phase-2" title="Permanent link">&para;</a></h3>
<p>Upstream documentation for running Trinity Phase 2 in parallel can be
found
<a href="https://github.com/trinityrnaseq/trinityrnaseq/wiki/Running-Trinity#optional-adapting-trinity-to-a-computing-grid-for-massively-parallel-processing-of-embarrassingly-parallel-steps">here</a>.</p>
<p>Trinity Phase 2 performs all the mini-assemblies in parallel. This phase
consists of a large number (e.g. tens or hundreds of thousands) of
commands that can be executed in parallel, each having independent
inputs and outputs (embarrassingly parallel).</p>
<p>By default, Phase 2 will be run in the same way as Phase 1, i.e. using
multiple threads on a single compute node to work through the list of
Phase 2 commands that need to be run. However, these commands are very
I/O intensive and can easily saturate the I/O bandwidth of a single
node. By utilising Trinity's "grid mode" we can distribute these
commands across many compute nodes, accessing a higher total I/O
bandwidth than is possible from a single node, which appears to improve
performance considerably. We have installed HPC GridRunner (recommended
in the Trinity documentation) to achieve this.</p>
<p>HPC GridRunner runs a master process, submitted as its own Slurm job,
that works by splitting the Phase 2 commands into batches of a certain
size (specified by the user) and submits these batches of commands to
the Slurm queue as separate jobs (referred to here as sub-jobs). The
user can configure how many sub-jobs are allowed to be in the Slurm
queue at any given time (so as not to overload the queue). Thus when a
sub-job finishes, HPC GridRunner will submit another, maintaining the
requested number of sub-jobs in the queue at any given time, until all
commands have been run.</p>
<p>An example configuration script for HPC GridRunner follows. This script
was tested and worked with our benchmark case but some parameters may
need to be adjusted, such as memory and time requirements. Note the
Trinity documentation suggested each command will need a maximum of 1 GB
memory, however we observed some commands spiking above 4 GB. This could
vary depending on your inputs.</p>
<div class="highlight"><pre><span></span><code><span class="o">[</span>GRID<span class="o">]</span>
<span class="c1"># grid type:</span>
<span class="nv">gridtype</span><span class="o">=</span>SLURM

<span class="c1"># template for a grid submission</span>
<span class="c1"># make sure:</span>
<span class="c1">#     --partition is chosen appropriately for the resource requirements </span>
<span class="c1">#       (here we choose either large or bigmem, whichever is available first)</span>
<span class="c1">#     --ntasks and --cpus-per-task should always be 1</span>
<span class="c1">#     --mem may need to be adjusted</span>
<span class="c1">#     --time may need to adjusted</span>
<span class="c1">#       (must be enough time for a batch of commands to finish)</span>
<span class="c1">#     --account should be your NeSI project code</span>
<span class="c1">#     add other sbatch options as required</span>
<span class="nv">cmd</span><span class="o">=</span>sbatch<span class="w"> </span>--partition<span class="o">=</span>large,bigmem<span class="w"> </span>--mem<span class="o">=</span>5G<span class="w"> </span>--ntasks<span class="o">=</span><span class="m">1</span><span class="w"> </span>--cpus-per-task<span class="o">=</span><span class="m">1</span><span class="w"> </span>--time<span class="o">=</span><span class="m">01</span>:00:00<span class="w"> </span>--account<span class="o">=</span>nesi12345

<span class="c1"># note -e error.file -o out.file are set internally, so dont set them in the above cmd.</span>

<span class="c1">#############################################################################</span>
<span class="c1"># settings below configure the Trinity job submission system, not tied to the grid itself.</span>
<span class="c1">#############################################################################</span>

<span class="c1"># number of grid submissions to be maintained at steady state by the Trinity submission system</span>
<span class="nv">max_nodes</span><span class="o">=</span><span class="m">100</span>

<span class="c1"># number of commands that are batched into a single grid submission job.</span>
<span class="nv">cmds_per_node</span><span class="o">=</span><span class="m">100</span>
</code></pre></div>
<p>The important details are:</p>
<ul>
<li><code>cmds_per_node</code> is the size of each batch of commands, i.e. here
  each Slurm sub-job runs 100 commands and then exits</li>
<li><code>max_nodes</code> is the number of sub-jobs that can be in the queue at
  any given time (each sub-job is single threaded, i.e. it uses just
  one core)</li>
<li>name this file <code>SLURM.conf</code> in the directory you will submit the job
  from</li>
<li>memory usage may be low enough that the sub-jobs can be run on
  either the large or bigmem partitions, which should improve
  throughput compared to bigmem alone</li>
</ul>
<p>A template Slurm submission script for Trinity Phase 2 is shown below:</p>
<div class="highlight"><pre><span></span><code>#!/bin/bash -e
#SBATCH --job-name=trinity-phase2grid
#SBATCH --account=nesi12345  # your NeSI project code
#SBATCH --time=30:00:00      # enough time for all sub-jobs to complete
#SBATCH --ntasks=1           # always 1 - this is the master process
#SBATCH --cpus-per-task=1    # always 1
#SBATCH --mem=20G            # memory requirements for master process
#SBATCH --partition=bigmem   # submit to an appropriate partition
#SBATCH --hint=nomultithread

# load Trinity and HPC GridRunner
module load Trinity/2.14.0-gimkl-2022a
module load HpcGridRunner/20210803

# run Trinity - this will be the master HPC GridRunner process that handles
#   submitting sub-jobs (batches of commands) to the Slurm queue
srun Trinity --CPU ${SLURM_CPUS_PER_TASK} --max_memory 20G \
  --grid_exec &quot;hpc_cmds_GridRunner.pl --grid_conf ${SLURM_SUBMIT_DIR}/SLURM.conf -c&quot; \
  [your_other_trinity_options]
</code></pre></div>
<ul>
<li>This assumes that you named the HPC GridRunner configuration script
  SLURM.conf and placed it in the same directory that you submit this
  job from</li>
<li>The options <code>--CPU</code> and <code>--max_memory</code> aren't used by Trinity in
  "grid mode" but are still required to be set (i.e. it shouldn't
  matter what you set them to)</li>
</ul>
<h2 id="benchmarks">Benchmarks<a class="headerlink" href="#benchmarks" title="Permanent link">&para;</a></h2>
<p>Here we provide details of a number of Trinity assemblies that have been
carried out on NeSI, in order to give a rough idea of how Trinity can
perform on NeSI and an indication of its resource requirements.</p>
<p>Timings mentioned here should be taken as indicative only and, even if
assembling the same sample again, would be expected to vary
significantly depending on various factors, such as the load on the
system and project fair share scores and priorities.</p>
<h3 id="test-sample">Test sample<a class="headerlink" href="#test-sample" title="Permanent link">&para;</a></h3>
<p>We ran a small test job of 8 million paired reads. Although much smaller
than usual this allowed us to quickly see the effect of making changes
to the workflow and ran quickly enough that we could compare the default
way of running Trinity to splitting the Trinity run into two phases and
using "grid mode".</p>
<p>Phase 1 took less than 1 hour to complete, using 8 cores and 10 GB
memory. For Phase 2 we requested 8 GB memory for the master process and
4 GB memory and 1 hour wall time for the sub-jobs. There were 195,741
mini-assemblies to run in Phase 2.</p>
<p>The table below summarises the timings for Phase 2, comparing the
default, single node way to run Phase 2, to using Trinity's "grid mode".</p>
<table>
<thead>
<tr>
<th>Type of run</th>
<th>Number of cores / grid specification</th>
<th>Run time (hrs:mins:secs)</th>
<th>Approximate core hour cost</th>
</tr>
</thead>
<tbody>
<tr>
<td>Single node (default)</td>
<td>16 cores</td>
<td>24:09:36</td>
<td>387</td>
</tr>
<tr>
<td>Grid</td>
<td>max_nodes=20; cmds_per_node=500</td>
<td>07:59:58</td>
<td>168</td>
</tr>
<tr>
<td>Grid</td>
<td>max_nodes=40; cmds_per_node=500</td>
<td>04:10:45</td>
<td>171</td>
</tr>
<tr>
<td>Grid</td>
<td>max_nodes=60; cmds_per_node=500</td>
<td>02:36:58</td>
<td>160</td>
</tr>
<tr>
<td>Grid</td>
<td>max_nodes=80; cmds_per_node=500</td>
<td>02:14:46</td>
<td>182</td>
</tr>
</tbody>
</table>
<p>This shows that performance is much better with Trinity's "grid mode".
Not only are the run times significantly lower but the total number of
core hours used is also much lower.</p>
<h3 id="marine-sediment-sample-1">Marine sediment sample 1<a class="headerlink" href="#marine-sediment-sample-1" title="Permanent link">&para;</a></h3>
<p>This benchmark concerns the assembly of a marine sediment sample,
containing two distinct microbial populations, from two distinct
geographical locations, of approximately 286 million paired reads. The
assembly was performed using the two-phase Trinity workflow discussed
above, using those submission scripts as templates.</p>
<p>Phase 1 ran on 18 threads with 220 GB memory on the bigmem partition and
took approximately 15 hours to complete.</p>
<p>For Phase 2, the master process ran on a single core with 20 GB memory
on the bigmem partition. HPC GridRunner was configured with both
<code>cmds_per_node</code> and <code>max_nodes</code> set to 100, with the sub-jobs running on
either large or bigmem partitions and requesting 5 GB memory and 1 hour
wall time each. The number of commands (mini-assemblies) that needed to
be run during this phase was 2,020,460. Phase 2 took approximately 19
hours to complete (elapsed time) and cost around 1,800 core hours.</p>
<h3 id="marine-sediment-sample-2">Marine sediment sample 2<a class="headerlink" href="#marine-sediment-sample-2" title="Permanent link">&para;</a></h3>
<p>This sediment sample, containing 303 million reads, was all from the
same location and was taken from a treatment experiment. The assembly
was performed using the two-phase Trinity workflow discussed above,
using those submission scripts as templates.</p>
<p>There were 4,136,295 mini-assemblies to run in Phase 2. The master
process requested 30 GB memory on the bigmem partition and HPC
GridRunner was configured with both <code>cmds_per_node</code> and <code>max_nodes</code> set
to 100. The sub-jobs ran on either the large or bigmem partitions and
required 1 hour wall time and 5 GB memory each. Phase 2 took
approximately 32 hours to complete (elapsed time) and cost around 3,100
core hours.</p>
<!-- Uncomment this if we make a good page on modues -->







  
    
  
  
    
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Last update">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1-2.1-2M12.5 7v5.2l4 2.4-1 1L11 13V7h1.5M11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2v1.8Z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">January 19, 2024</span>
  </span>

    
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Created">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3h-2Z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">November 17, 2023</span>
  </span>

    
    
    
  </aside>


  




                



              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
    <div id="new-footer">
        <div id="partners">
          <div id="logos">
            <a href="https://nesi.org.nz" class="nesi-footer-logo" target="_blank"><img alt="" src="https://www.nesi.org.nz/sites/default/files/LogoNeSI-footer.png"></a>
            <a href="http://www.mbie.govt.nz/" target="_blank"><img alt="" src="https://www.nesi.org.nz/sites/default/files/media/LogoMBIE.png"></a>
            <a href="https://www.auckland.ac.nz/" target="_blank"><img alt="" src="https://www.nesi.org.nz/sites/default/files/media/LogoUoA.png"></a>
            <a href="https://www.niwa.co.nz/" target="_blank"><img alt="" src="https://www.nesi.org.nz/sites/default/files/media/LogoNIWA.png"></a>
            <a href="https://www.otago.ac.nz/" target="_blank"><img alt="" src="https://www.nesi.org.nz/sites/default/files/media/LogoUoO.png"></a>
            <a href="http://www.landcareresearch.co.nz/" target="_blank"><img alt="" src="https://www.nesi.org.nz/sites/default/files/LogoManaakiWhenuaLandcareResearch.png"></a>
          </div>
        </div>
        <div id="inner">
          <span id="links"><a href="https://www.nesi.org.nz/copyright" target="_blank">Copyright © <span id="year">2023</span> · New Zealand eScience Infrastructure</a> | <a href="https://www.nesi.org.nz//disclaimer" target="_blank">Disclaimer</a> | <a href="https://www.nesi.org.nz//privacy" target="_blank">Privacy</a>
          </span>
        </div>
    </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.indexes", "navigation.top", "navigation.prune", "content.code.copy", "content.action.edit", "navigation.path"], "search": "../../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.8fd75fb4.min.js"></script>
      
        <script src="../../../assets/javascripts/general.js"></script>
      
    
  </body>
</html>