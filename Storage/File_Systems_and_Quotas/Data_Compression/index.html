
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="NeSI automatically compresses data to free storage capacity.">
      
      
      
        <link rel="canonical" href="https://github.com/nesi/support-docs-concept/Storage/File_Systems_and_Quotas/Data_Compression/">
      
      
        <link rel="prev" href="../Automatic_cleaning_of_nobackup_file_system/">
      
      
        <link rel="next" href="../File_permissions_and_groups/">
      
      
      <link rel="icon" href="../../../assets/icons/favicon.ico">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.4">
    
    
      
        <title>Data Compression - NeSI Support Center</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.50c56a3b.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/neoteroi-mkdocs.css">
    
      <link rel="stylesheet" href="../../../assets/stylesheets/footer.css">
    
      <link rel="stylesheet" href="../../../assets/stylesheets/custom_admonations.css">
    
      <link rel="stylesheet" href="../../../assets/stylesheets/theme.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#compression-methods" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
<style>
#banner{
    font-size: larger;
    text-align: center;
    background:  var(--md-warning-bg-color);
}
#banner a:link {
    color: blue;
}
#banner a:visited {
    color: purple;
}
#banner a:focus,
#banner a:hover {
    border-bottom: 1px solid;
}
#banner p{
    color: black;
}
</style>

<div id="banner">
    <p>This site is in Beta. All content is a duplication of  
    <a href="https://support.nesi.org.nz/hc/en-gb">offical NeSI support documentation.</a>
    </p>
</div>

      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="NeSI Support Center" class="md-header__button md-logo" aria-label="NeSI Support Center" data-md-component="logo">
      
  <img src="../../../assets/icons/logo.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            NeSI Support Center
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Data Compression
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9v1Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="custom" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/nesi/support-docs-concept" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    


    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="NeSI Support Center" class="md-nav__button md-logo" aria-label="NeSI Support Center" data-md-component="logo">
      
  <img src="../../../assets/icons/logo.svg" alt="logo">

    </a>
    NeSI Support Center
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/nesi/support-docs-concept" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    
  
  
    <a href="../../../Getting_Started/Accounts-Projects_and_Allocations/Creating_a_NeSI_Account_Profile/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Getting Started
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    
  
  
    <a href="../../../General/Announcements/Accessing_NeSI_Support_during_the_holiday_break/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    General
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    
  
  
    <a href="../../../Scientific_Computing/Training/Introduction_to_computing_on_the_NeSI_HPC/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Scientific Computing
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

  

      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Storage
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Storage
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1" checked>
        
          
          <label class="md-nav__link" for="__nav_4_1" id="__nav_4_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    File Systems and Quotas
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4_1">
            <span class="md-nav__icon md-icon"></span>
            File Systems and Quotas
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../NeSI_File_Systems_and_Quotas/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    NeSI File Systems and Quotas
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Automatic_cleaning_of_nobackup_file_system/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Automatic cleaning of nobackup file system
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Data Compression
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Data Compression
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#compression-methods" class="md-nav__link">
    <span class="md-ellipsis">
      Compression Methods
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Compression Methods">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#on-demand-synchronous" class="md-nav__link">
    <span class="md-ellipsis">
      On-Demand (synchronous)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deferred" class="md-nav__link">
    <span class="md-ellipsis">
      Deferred
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#states-of-a-compressed-file" class="md-nav__link">
    <span class="md-ellipsis">
      States of a compressed file
    </span>
  </a>
  
    <nav class="md-nav" aria-label="States of a compressed file">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-different-states" class="md-nav__link">
    <span class="md-ellipsis">
      The different states
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-different-compression-algorithms" class="md-nav__link">
    <span class="md-ellipsis">
      Using different compression algorithms
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#performance-impacts" class="md-nav__link">
    <span class="md-ellipsis">
      Performance impacts
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../File_permissions_and_groups/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    File permissions and groups
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../I-O_Performance_Considerations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    I/O Performance Considerations
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../Data_Recovery/File_Recovery/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Data Recovery
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../Data_Transfer_Services/Globus_Quick_Start_Guide/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Data Transfer Services
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../Nearline_long_term_storage/Nearline_Long_Term_Storage_Service/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Nearline_long-term_storage
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../Release_Notes_Nearline/Long_Term_Storage_Nearline_release_notes_v1-1-0-14/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Release Notes Nearline
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#compression-methods" class="md-nav__link">
    <span class="md-ellipsis">
      Compression Methods
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Compression Methods">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#on-demand-synchronous" class="md-nav__link">
    <span class="md-ellipsis">
      On-Demand (synchronous)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deferred" class="md-nav__link">
    <span class="md-ellipsis">
      Deferred
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#states-of-a-compressed-file" class="md-nav__link">
    <span class="md-ellipsis">
      States of a compressed file
    </span>
  </a>
  
    <nav class="md-nav" aria-label="States of a compressed file">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-different-states" class="md-nav__link">
    <span class="md-ellipsis">
      The different states
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-different-compression-algorithms" class="md-nav__link">
    <span class="md-ellipsis">
      Using different compression algorithms
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#performance-impacts" class="md-nav__link">
    <span class="md-ellipsis">
      Performance impacts
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                

                  
  
<nav class="md-tags" >
  
    
    
    
      <span class="md-tag">compression</span>
    
  
    
    
    
      <span class="md-tag">lz4</span>
    
  
    
    
    
      <span class="md-tag">data compression</span>
    
  
    
    
    
      <span class="md-tag">zlib</span>
    
  
    
    
    
      <span class="md-tag">z library</span>
    
  
</nav>


  
    <a href="https://github.com/nesi/support-docs-concept/edit/main/docs/Storage/File_Systems_and_Quotas/Data_Compression.md" title="Edit this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4v-2m10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1 2.1 2.1Z"/></svg>
    </a>
  
  


  <h1>Data Compression</h1>

<p>Spectrum Scale filesystems (previously GPFS) allow users to compress
data (but not metadata) transparently on demand without the need to
change metadata (file creation and modification dates, etc). This means
that that data can be compressed and then used without first needing to
decompress it, as the decompression happens automatically in the
background without the need for commands. It allows you to treat the
data as if it were not compressed.</p>
<p>The data will need to be re-compressed after it is used if you are to
maintain it in the compressed state. This can be done by the user (front
end) or at the back end via a policy for example. In the future, it is
intended that there will be some automatic process regularly compressing
flagged files, but at this time, it is only done manually by the NeSI
team for specific filesets identified as suitable for the compression;
or by the user manually on their own filesets.</p>
<p>For purposes of this Guide, we are going to focus on the user side and
what the users can do. As a default, the Zlib compression algorithm will
be used, although depending on the version of the filesystem, additional
ones might be added. It is possible to change algorithms at any time for
any file (we will cover that further ahead) when the compression is
requested.</p>
<h2 id="compression-methods">Compression Methods<a class="headerlink" href="#compression-methods" title="Permanent link">&para;</a></h2>
<p>There are two methods for compressing and decompressing data:
<strong>on-demand</strong> and <strong>deferred</strong>:</p>
<h3 id="on-demand-synchronous">On-Demand (synchronous)<a class="headerlink" href="#on-demand-synchronous" title="Permanent link">&para;</a></h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>As at 2 May 2023, the <code>mm</code> commands are not available by
default, <a href="mailto:support@nesi.org.nz">Contact our Support Team</a> for assistance.</p>
</div>
<p>This method (using the <code>mmchattr</code> command) acts similar to
<code>gzip</code>/<code>gunzip</code> commands where the file being targeted is compressed or
decompressed on command invocation. If the command fails halfway through
the file or is cancelled, the file will be marked as <code>illcompressed</code>.
This state means that the file is only partially compressed.</p>
<p><code>ls</code> command will show files with their original sizes. However, <code>du</code><br />
commands will calculate the approximate usage of the file system as
opposed to the uncompressed usage. This will be the total counting
against quotas as well. Therefore, if files are compressed, quota usage
will decrease. And vice versa, if files are decompressed, fully or
partially, quota usage will increase. Be aware that if, in the process
of decompression, the quota will be exceeded, an error message will be
displayed</p>
<div class="highlight"><pre><span></span><code>du<span class="w"> </span>-h<span class="w"> </span>FileA.txt
</code></pre></div>
<div class="highlight"><pre><span></span><code>41M FileA.txt
</code></pre></div>
<hr />
<div class="highlight"><pre><span></span><code>ls<span class="w"> </span>-lh<span class="w"> </span>FileA.txt
</code></pre></div>
<div class="highlight"><pre><span></span><code>-rw-r--r-- 1 user001 user001 41M Jul 6 01:03 FileA.txt
</code></pre></div>
<hr />
<div class="highlight"><pre><span></span><code><span class="nb">time</span><span class="w"> </span>mmchattr<span class="w"> </span>--compression<span class="w"> </span>yes<span class="w"> </span>FileA.txt
</code></pre></div>
<div class="highlight"><pre><span></span><code>real 0m1.343s
user 0m0.002s
sys 0m0.000s
</code></pre></div>
<hr />
<div class="highlight"><pre><span></span><code>ls<span class="w"> </span>-lh<span class="w"> </span>FileA.txt
</code></pre></div>
<div class="highlight"><pre><span></span><code>-rw-r--r-- 1 user001 user001 41M Jul 6 01:03 FileA.txt
</code></pre></div>
<hr />
<div class="highlight"><pre><span></span><code>du<span class="w"> </span>-h<span class="w"> </span>FileA.txt
</code></pre></div>
<div class="highlight"><pre><span></span><code>8.0M FileA.txt
</code></pre></div>
<h3 id="deferred">Deferred<a class="headerlink" href="#deferred" title="Permanent link">&para;</a></h3>
<p>This method (also using the <code>mmchattr</code> command) does not decompress or
compress data immediately but, instead marks them for
compression/decompression to be invoked later. The user can later
schedule a secondary task to compress or decompress tagged data. In the
future, the deferred tag will flag the data for automatic
compression/decompression. This tagging process is quick and can be done
by using the same command as above with one extra flag (<code>-I defer</code>).
During this process, there is no change in space occupancy for any of
the files involved.</p>
<div class="highlight"><pre><span></span><code>du<span class="w"> </span>-h<span class="w"> </span>FileA.txt
</code></pre></div>
<div class="highlight"><pre><span></span><code>41M FileA.txt
</code></pre></div>
<hr />
<div class="highlight"><pre><span></span><code>ls<span class="w"> </span>-lh<span class="w"> </span>FileA.txt
</code></pre></div>
<div class="highlight"><pre><span></span><code>-rw-r--r-- 1 user001 user001 41M Jul 6 01:03 FileA.txt
</code></pre></div>
<hr />
<div class="highlight"><pre><span></span><code><span class="nb">time</span><span class="w"> </span>mmchattr<span class="w"> </span>-I<span class="w"> </span>defer<span class="w"> </span>--compression<span class="w"> </span>yes<span class="w"> </span>FileA.txt
</code></pre></div>
<div class="highlight"><pre><span></span><code>real 0m0.002s
user 0m0.002s
sys 0m0.000s
</code></pre></div>
<hr />
<div class="highlight"><pre><span></span><code>ls<span class="w"> </span>-lh<span class="w"> </span>FileA.txt
</code></pre></div>
<div class="highlight"><pre><span></span><code>-rw-r--r-- 1 user001 user001 41M Jul 6 01:03 FileA.txt
</code></pre></div>
<hr />
<div class="highlight"><pre><span></span><code>du<span class="w"> </span>-h<span class="w"> </span>FileA.txt
</code></pre></div>
<div class="highlight"><pre><span></span><code>41M FileA.txt
</code></pre></div>
<h4 id="how-to-process-deferred-tagged-files">How to process deferred tagged files<a class="headerlink" href="#how-to-process-deferred-tagged-files" title="Permanent link">&para;</a></h4>
<p>Users can process compression/decompression on the tagged files via the
<code>mmrestripefile</code> command (using <code>-z</code> flag).</p>
<div class="highlight"><pre><span></span><code>mmrestripefile<span class="w"> </span>-z<span class="w"> </span>FileA.txt
</code></pre></div>
<div class="highlight"><pre><span></span><code>Scanning FileA.txt
Scan completed successfully.
</code></pre></div>
<h2 id="states-of-a-compressed-file">States of a compressed file<a class="headerlink" href="#states-of-a-compressed-file" title="Permanent link">&para;</a></h2>
<p>Compressed files on Scale filesystems can be in 4 different states
depending on the extended attributes of the file when manipulated for
compression. We can check those attributes with the <code>mmlsattr</code> command:</p>
<div class="highlight"><pre><span></span><code>mmlsattr<span class="w"> </span>-L<span class="w"> </span>FileA.txt
</code></pre></div>
<div class="highlight"><pre><span></span><code>file name: FileA.txt
metadata replication: 1 max 2
data replication: 1 max 2
immutable: no
appendOnly: no
flags:
storage pool name: data
fileset name: home_user001
snapshot name:
creation time: Wed Jul 6 00:54:27 2022
Misc attributes: ARCHIVE
Encrypted: no
</code></pre></div>
<p>The misc attributes will have or not have a <code>COMPRESSION</code> value,
depending on if the file is or not tagged for compression. In addition,
a file will exhibit the flag <code>illcompressed</code> when the desired final
state is not the achieved yet (fully compressed or uncompressed).</p>
<p>A file that is fully compressed (not showing the flag <code>illcompressed</code>
and having the misc attribute <code>COMPRESSION</code> ), if updated or appended
data to, becomes automatically <code>illcompressed</code> and either needs to be
re-compressed using the <code>mmchattr --compression yes</code> command or the
<code>mmrestripefile -z</code> one (because it's already tagged for compression).</p>
<h3 id="the-different-states">The different states<a class="headerlink" href="#the-different-states" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p><code>Uncompressed</code> and <code>untagged</code> for compression (default) - as
    shown for the file <code>FileA.txt</code> above.</p>
</li>
<li>
<p><code>Partially compressed</code> and <code>tagged</code> for compression - When file
    is partially compressed (either because it was decompressed for
    access or the full compression didn’t finish). It is still marked
    for compression as the <code>COMPRESSION</code> misc attribute suggests, but
    because it's not fully compressed the <code>illcompressed</code> flag will be
    shown.</p>
<div class="highlight"><pre><span></span><code>mmlsattr<span class="w"> </span>-L<span class="w"> </span>FileA.txt
</code></pre></div>
<div class="highlight"><pre><span></span><code>file name: FileA.txt
metadata replication: 1 max 2
data replication: 1 max 2
immutable: no
appendOnly: no
flags: illcompressed
storage pool name: data
fileset name: home_user001
snapshot name:
creation time: Wed Jul 6 00:54:27 2022
Misc attributes: ARCHIVE COMPRESSION (library z)
Encrypted: no
</code></pre></div>
</li>
<li>
<p><code>Fully compressed</code> and <code>tagged</code> for compression - The file is
    fully compressed to its maximum possible state and because the file
    is tagged for compression, only the misc attribute <code>COMPRESSION</code>
    will be shown.</p>
<div class="highlight"><pre><span></span><code>mmlsattr<span class="w"> </span>-L<span class="w"> </span>FileA.txt
</code></pre></div>
<div class="highlight"><pre><span></span><code>file name: FileA.txt
metadata replication: 1 max 2
data replication: 1 max 2
immutable: no
appendOnly: no
flags:
storage pool name: data
fileset name: home_user001
snapshot name:
creation time: Wed Jul 6 00:54:27 2022
Misc attributes: ARCHIVE COMPRESSION (library z)
Encrypted: no
</code></pre></div>
</li>
<li>
<p><code>Full or partially compressed</code> and <code>untagged</code> for compression -
    The file might be fully or partially compressed and in this case
    because the misc attribute <code>COMPRESSION</code> is not shown, it means the
    file is <code>untagged</code> for being compressed (meaning it's tagged to be in
    the uncompressed state). When a fully compressed file is <code>untagged</code>,
    the flag <code>illcompressed</code> will be shown. After full decompression is
    complete the file will become uncompressed and <code>untagged</code> for
    compression.</p>
<div class="highlight"><pre><span></span><code>mmlsattr<span class="w"> </span>-L<span class="w"> </span>FileA.txt
</code></pre></div>
<div class="highlight"><pre><span></span><code>file name: FileA.txt
metadata replication: 1 max 2
data replication: 1 max 2
immutable: no
appendOnly: no
flags: illcompressed
storage pool name: data
fileset name: home_user001
snapshot name:
creation time: Wed Jul 6 00:54:27 2022
Misc attributes: ARCHIVE
Encrypted: no
</code></pre></div>
</li>
</ul>
<h2 id="using-different-compression-algorithms">Using different compression algorithms<a class="headerlink" href="#using-different-compression-algorithms" title="Permanent link">&para;</a></h2>
<p>The default algorithm is the Zlib and will be shown on the misc
attributes of a tagged file as “library z”. Depending on the Scale
version installed, files can be tagged with different algorithms.</p>
<p>Currently supported compression libraries are:</p>
<ul>
<li>
<p>z Cold data. Favours compression efficiency over access speed.</p>
</li>
<li>
<p>lz4 Active, non-specific data. Favours access speed over compression
    efficiency.</p>
</li>
</ul>
<h2 id="performance-impacts">Performance impacts<a class="headerlink" href="#performance-impacts" title="Permanent link">&para;</a></h2>
<p>Experiments showed that I/O performance was definitely affected if a
file was in a compressed state. The extent of the effect, however,
depends on the magnitude of I/O operations on the affected files.  I/O
intensive workloads may experience a significant performance drop.  </p>
<p>If compression has a significant impact on your software performance,
please confirm it first by running a test job with and without
compression and then <a href="mailto:support@nesi.org.nz">Contact our Support Team</a>. We will help
you minimise the impact of compression on your workflow or find other
ways to help you manage your project storage.</p>
<p>If you are interested in learning more about this type of data compression
<a href="https://www.ibm.com/docs/en/spectrum-scale/4.2.2?topic=systems-file-compression">you can find further details on the IBM website</a>.</p>







  
    
  
  
    
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Last update">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1-2.1-2M12.5 7v5.2l4 2.4-1 1L11 13V7h1.5M11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2v1.8Z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">January 21, 2024</span>
  </span>

    
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Created">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3h-2Z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">June 8, 2023</span>
  </span>

    
    
    
  </aside>





                



              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
    <div id="new-footer">
        <div id="partners">
          <div id="logos">
            <a href="https://nesi.org.nz" class="nesi-footer-logo" target="_blank"><img alt="" src="https://www.nesi.org.nz/sites/default/files/LogoNeSI-footer.png"></a>
            <a href="http://www.mbie.govt.nz/" target="_blank"><img alt="" src="https://www.nesi.org.nz/sites/default/files/media/LogoMBIE.png"></a>
            <a href="https://www.auckland.ac.nz/" target="_blank"><img alt="" src="https://www.nesi.org.nz/sites/default/files/media/LogoUoA.png"></a>
            <a href="https://www.niwa.co.nz/" target="_blank"><img alt="" src="https://www.nesi.org.nz/sites/default/files/media/LogoNIWA.png"></a>
            <a href="https://www.otago.ac.nz/" target="_blank"><img alt="" src="https://www.nesi.org.nz/sites/default/files/media/LogoUoO.png"></a>
            <a href="http://www.landcareresearch.co.nz/" target="_blank"><img alt="" src="https://www.nesi.org.nz/sites/default/files/LogoManaakiWhenuaLandcareResearch.png"></a>
          </div>
        </div>
        <div id="inner">
          <span id="links"><a href="https://www.nesi.org.nz/copyright" target="_blank">Copyright © <span id="year">2023</span> · New Zealand eScience Infrastructure</a> | <a href="https://www.nesi.org.nz//disclaimer" target="_blank">Disclaimer</a> | <a href="https://www.nesi.org.nz//privacy" target="_blank">Privacy</a>
          </span>
        </div>
    </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.indexes", "navigation.top", "navigation.prune", "content.code.copy", "content.action.edit", "navigation.path"], "search": "../../../assets/javascripts/workers/search.c011b7c0.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.7389ff0e.min.js"></script>
      
        <script src="../../../assets/javascripts/general.js"></script>
      
    
  </body>
</html>